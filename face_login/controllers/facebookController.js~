(function() {
    'use strict';

    angular
	.module('faceLogin')
	.controller('facebookController', facebookController);

    facebookController.$inject = ['$http', '$scope', 'urlService'];
    
    function facebookController($http, $scope, urlService) {
	let vm = this;

	$scope.loadData = loadData;

	vm.accessToken = urlService.getUrlParam('access_token');
	vm.expiresIn = urlService.getUrlParam('expires_in');
	vm.code = urlService.getUrlParam('code');
	vm.grantedScopes = urlService.getUrlParam('granted_scopes');
	console.log(vm.accessToken);
	console.log(vm.expiresIn);
	console.log(vm.code);
	console.log(vm.grantedScopes);


	function loadData() {
	    let temp = "http://graph.facebook.com/me?fields=id,name,devices,education,likes&access_token="+vm.accessToken;
	    console.log(temp);
	    $http.get(temp)
		.then(function(response){
		    console.log(response.data);
		})
		.catch(function(error) {
		    throw new Error(error);
		});
	}
    }
})();
